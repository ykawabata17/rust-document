# Rsutの勉強する
このリポジトリでは，Rustの勉強用に[The Rust Programming Language 日本語版](https://doc.rust-jp.rs/book-ja/title-page.html#the-rust-programming-language-%E6%97%A5%E6%9C%AC%E8%AA%9E%E7%89%88)を題材として，自分なりに勉強を進めていく．  
**知らないところやRust特有の概念などを勉強したいので，すでに知っている概念や書き方などは省略してある．**  

## 2章 数当てゲーム
ここでは，いきなりRustを実際に触っていく．  
プロジェクトの立ち上げ方は，立ち上げたいディレクトリ上で`cargo new (project_name)`を打ち込む．  
生成された *(project_name)/Cargo.toml* ファイルはプロジェクト全体の設定を行うファイルのようなもので， *(project_name)/src/main.rs* ファイルにコードを書いていく．
特に概念的な話はなく，ただコードを動かして楽しむだけの章なのでこれだけ．

## 3章 一般的な概念
他の言語にもあるような一般的なプログラミングの概念をRustで書くとどうなるのかを勉強する．

### 3.1 変数と可変性
変数を定義するときは`let`を用いる． 可変定数を定義するときは`mut`を用いる．
```rust
let x = 5;      // これは不変定数の定義
x = 6;          // 不変定数だからこれはコンパイルエラーになる
let mut y = 5;  // これは可変定数の定義
y = 6;          // 可変定数だから書き換え可能
```
不変定数を書き換える方法として，**覆い隠す**方法がある．
```rust
let x = 5;
x = x + 1;      // 不変定数の覆い隠し（実行可能)
let spaces = "   ";     // String型で，スペース3つ
spaces = spaces.len();  // 整数型でspacesの長さ(型が変わっても覆い隠しなら問題なし)
```
逆に，以下のコードはコンパイルエラーになる，面白い．
```rust
let mut spaces = "   ";   // 可変定数で同じように定義
spaces = spaces.len();    // コンパイルエラーになる
```

### 3.2 データ型
Rustは**静的型付け言語**である．つまり，コンパイル時に全ての変数の方が判明している必要がある．  
コンパイル時に複数の型を取り得る場合は型注釈を付けないとコンパイルエラーになるよ．(他にない概念でちょっと難しい)
```rust
let guess: u32 = "42".parse().expect("Not a number!");    // expectで型注釈を記載
```
この辺の概念はPythonしか基本触ってこなかった自分からしたらめんどくさいけど面白い．  
  
データ型については基本的に他の言語とそう変わらないので結構省略する．大事そうな部分だけピックアップ．  
* 基本的に，整数型は`i32(符号付き32bit)`，浮動小数点型は`f64(倍精度浮動小数点数)`を用いましょ．  
* 文字型`char`は**ユニコード**なので，アスキーよりもいっぱい文字を扱える(らしい)．詳しくは8章だって．  
* タプルの要素への参照にはなぜか`tuple.要素数`のように()や[]を用いない
```rust
let tup = (500, 4.1, 3);
let first = tup.0;    // 500
let second = tup.1;   // 4.1
```

### 3.3 関数
関数に関しても基本的に構文は一緒．  
返り値に`return`とか明記しないからそこだけ注意．  
```rust
// 関数の定義
// xとyを引数として足し合わせて返す関数
fn add_x_y(x: i32, y: i32) -> i32 {
    x+y     // 返り値にはreturnなどを明記しない(気持ち悪い)
}

fn main() {
    let add_num = add_x_y(3, 5);
    println!("3 + 5 is {}", add_num);
}
```
注意したいのは，返り値として記載してる`x+y`のところ．文末にセミコロンがないため**式**として認識される．これにセミコロンを足してしまうと**文**として認識されてコンパイルエラーになる．  
セミコロンの有無で式と文の違いを表現している．面白い．

### 3.5 制御フロー
if文とwhile文は基本的に一緒．  
for文が少し違ってて，`for ~ in ...`の書き方しかできない．まぁこの書き方もPythonにあるからわかる．  
初めてみたのは`loop{}`構文．ただひたすらに{}内をループするから，breakで抜けてあげないと無限ループしちゃう．

## 4章 所有権